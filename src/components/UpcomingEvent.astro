---
// UpcomingEvent component to display the next meetup in the hero section
import { getNextEvent, formatFullDate, formatEventTime } from '../data/events';

// Get the next upcoming event from shared data
const upcomingEvent = getNextEvent();
---

<div class="flex items-stretch">
  {
    upcomingEvent ? (
      <div class="w-full max-w-md rounded-xl bg-white/2.5 p-2 ring-1 ring-white/10 ring-inset mx-auto lg:mx-0 lg:p-4 flex">
        <div class="w-full h-full rounded-md bg-gradient-to-br from-neutral-50/5 to-neutral-100/5 p-6 text-center flex flex-col justify-center lg:min-w-sm">
          <div class="mb-4">
            <div class="inline-flex items-center rounded-full bg-lime-500/20 px-3 py-1 text-sm font-medium text-lime-300 ring-1 ring-inset ring-lime-500/30">
              Next Meetup
            </div>
          </div>

          <h3 class="text-3xl font-bold text-white mb-3 line-clamp-2">
            {upcomingEvent.title}
          </h3>

          <div class="space-y-2 text-gray-300 mb-4 text-lg">
            <div class="flex items-center justify-center gap-2">
              <svg
                class="w-4 h-4 text-lime-400 flex-shrink-0"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="truncate">{formatFullDate(upcomingEvent.date)}</span>
            </div>

            <div class="flex items-center justify-center gap-2">
              <svg
                class="w-4 h-4 text-lime-400 flex-shrink-0"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="truncate">
                {formatEventTime(upcomingEvent.date)}
              </span>
            </div>

            <div class="flex items-center justify-center gap-2">
              <svg
                class="w-4 h-4 text-lime-400 flex-shrink-0"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
              </svg>
              <span class="truncate">
                {upcomingEvent.maxAttendees
                  ? `${upcomingEvent.currentRSVPs}/${upcomingEvent.maxAttendees}`
                  : upcomingEvent.currentRSVPs}{' '}
                attending
              </span>
            </div>
          </div>

          <a
            href={upcomingEvent.registrationUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-primary btn-md"
          >
            RSVP on Meetup
            <svg
              class="ml-2 -mr-1 w-4 h-4"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </a>
        </div>
      </div>
    ) : (
      <div class="w-full max-w-md rounded-xl bg-white/2.5 p-2 ring-1 ring-white/10 ring-inset mx-auto lg:mx-0 lg:p-4 flex">
        <div class="w-full h-full rounded-md bg-gradient-to-br from-neutral-500/20 to-neutral-500/20 p-6 text-center flex flex-col justify-center">
          <div class="mb-4">
            <div class="inline-flex items-center rounded-full bg-lime-500/20 px-3 py-1 text-sm font-medium text-lime-300 ring-1 ring-inset ring-lime-500/30">
              No Upcoming Events
            </div>
          </div>

          <h3 class="text-xl font-bold text-white mb-3">Check Back Soon</h3>

          <p class="text-gray-300 mb-4 text-sm">
            We're planning our next meetup. Follow us on Meetup for updates!
          </p>

          <a
            href="https://www.meetup.com/nashville-ai-engineering"
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-secondary btn-md"
          >
            Visit Our Meetup Group
            <svg
              class="ml-2 -mr-1 w-4 h-4"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </a>
        </div>
      </div>
    )
  }
</div>
